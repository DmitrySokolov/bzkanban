<html>
    <head>
        <script type="text/javascript">
            // Customize your query by modifying these.
            var bzURL = "http://bugzilla.ddk.armysimulation.mil.ca";
            var bzProduct = "vcci";
            var bzProductMilestone = "Release 3.8.0"
            var bzComponent = ""
            var bzPriority = ""
            var bzAssignedTo = ""

            window.onload = loadBoard;

            function loadBoard() {
                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function() {
                    if (xhr.readyState == XMLHttpRequest.DONE) {
                        var response = xhr.responseText;
                        var obj = JSON.parse(response);
                        statuses = obj.values;
                        for (var key in statuses) {
                            status = statuses[key];
                            addBoardColumn(status);
                        }


                        loadBugs();
                    }
                }
                xhr.open("GET", bzURL + "/rest/field/bug/status/values");
                xhr.send();
            }

            function loadBugs() {
                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function() {
                    if (xhr.readyState == XMLHttpRequest.DONE) {
                        var response = xhr.responseText;
                        var obj = JSON.parse(response);
                        bugs = obj.bugs;
                        for (var key in bugs) {
                            bug = bugs[key];
                            addCard(bug);
                        }
                    }
                }
                xhr.open("GET", bzURL + "/rest/bug?product=" + bzProduct + "&include_fields=summary,status,id,severity,priority&target_milestone=" + bzProductMilestone + "&component=" + bzComponent + "&priority=" + bzPriority + "&assigned_to=" + bzAssignedTo);
                xhr.send();
            }

            function addBoardColumn(status) {
                var th = document.createElement('th');
                th.innerHTML = status;
                document.getElementById("board-headings").appendChild(th);

                var td = document.createElement('td');
                td.id = status;
                document.getElementById("board-cards").appendChild(td);
            }

            function addCard(bug) {
                var div = document.createElement('div');
                div.className = bug.severity + " " + bug.priority +" " + "card";
                div.innerHTML = "<a href='" + bzURL + "/show_bug.cgi?id=" + bug.id + "'>#" + bug.id + "</a> " + bug.summary;
                document.getElementById(bug.status).appendChild(div);
            }
        </script>
        <style>
            #board {
                width: 100%;
                table-layout: fixed;
            }
            .card {
                border-width: 1px;
                border-color: black;
                border-style: dotted;
                padding: 5px;
                margin: 2px;
            }
            .enhancement {
                border-right-color: greenyellow;
                border-right-width: 4px;
                border-right-style: solid;
            }
            .critical {
                border-right-color: red;
                border-right-width: 4px;
                border-right-style: solid;
            }
            .P1 {
                border-left-color: orange;
                border-left-width: 4px;
                border-left-style: solid;
            }
            #board-cards {
                vertical-align: top;
            }
        </style>
    </head>
    <body>
        <table id="board">
            <tr id="board-headings"></tr>
            <tr id="board-cards"></tr>
        </table>
    </body>
</html>
